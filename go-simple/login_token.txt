f, err := os.Create("login_token.txt")
	defer f.Close()<!doctype html>
<html lang="zh-Hant">
<head>
    <title>iThome 會員中心</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=9, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://member.ithome.com.tw/lib/imgareaselect/css/imgareaselect-animated.css">
    <link rel="stylesheet" href="https://member.ithome.com.tw/lib/imgareaselect/css/imgareaselect-default.css">
    <link rel="stylesheet" href="https://member.ithome.com.tw/lib/imgareaselect/css/imgareaselect-deprecated.css">
        </head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-md" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="https://member.ithome.com.tw">
                <img src="https://member.ithome.com.tw/img/ithome_logo.png">
                <span class="logoname">會員中心</span>
            </a>


        </div>
        <div id="navbar" class="collapse navbar-collapse">

            <ul class="nav navbar-nav navbar-right">
                                    <li class="navbar-img"><span class="navbar-img-link"><img src="https://member.ithome.com.tw/avatars/130067"
                                                                              alt="" style="width: 30px; height: 30px;"></span>aaronkctan93
                    </li>

                    
                    <li><a href="/logout">登出</a></li>
                            </ul>
        </div>
    </div>
</nav><div class="container">
            <div class="account">
            <div class="head">
                <img id="avatarInfo" src="https://member.ithome.com.tw/avatars/130067" height="130" width="130">
                <div class="edit-head" id="editAvatarBtn">
                    <span class="edit">編輯</span>
                </div>
            </div>

            <p>帳號</p>
            <p class="account-fontsize">aaronkctan93</p>
        </div>

        <div class="account-bg">
            <div class="nickname">
                <p class="nick-position">暱稱<i class="fa fa-pencil"></i></p>
                <p id="editNickname" class="form-control-static col-sm-12 col-md-3 has-feedback" contenteditable>
                                            aaronkctan93
                    
                </p>
            </div>
                        <div class="menu">
                <ul class="text-center">
                    <li role="presentation">
                        <a href="https://member.ithome.com.tw/profile/account/130067/edit#"
                           class="active"><i
                                    class="fa fa-user"></i>個人資料維護</a>
                    </li>
                    <li role="presentation">
                        <a href="https://member.ithome.com.tw/profile/email/130067#"
                           class=""><i
                                    class="fa fa-envelope"></i>信箱管理</a>
                    </li>
                    <li role="presentation">
                        <a href="https://member.ithome.com.tw/profile/password/130067#"
                           class=""><i
                                    class="fa fa-lock"></i>變更密碼</a>
                    </li>
                    <li role="presentation">
                        <a href="https://member.ithome.com.tw/profile/social#"
                           class=""><i
                                    class="fa fa-users"></i>管理社群帳號</a>
                    </li>
                    <li role="presentation">
                        <a href="https://member.ithome.com.tw/profile/aboutme/130067/edit#"
                           class=""><i
                                    class="fa fa-comment"></i>編輯自我介紹</a>
                    </li>
                    <li role="presentation">
                        <a href="https://member.ithome.com.tw/profile/epaper/130067/edit#"
                           class=""><i
                                    class="fa fa-paper-plane"></i>電子報管理</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="setting">

            <div class="row">
                <div class="col-sm-offset-2 col-sm-8 col-md-8 col-md-offset-2">
                        <div class="text-center">
        <h4>個人資料維護</h4>
            </div>

            
            <form method="POST" action="https://member.ithome.com.tw/profile/account/130067" accept-charset="UTF-8" class="form-horizontal"><input name="_method" type="hidden" value="PUT"><input name="_token" type="hidden" value="EjhOUNpx15YD4xpPlLUGn6deFjNP8gv7xtMWhsAF">
                <div class="form-group">
                    <label for="realname" class="col-md-3 control-label">姓名</label>
                    <div class="col-md-6">
                        <input id="realname" class="form-control" placeholder="姓名" name="realname" type="text" value="TAN KAR CHUN">
                    </div>
                </div>
                <div class="form-group">
                    <label for="gender" class="col-md-3 control-label">性別</label>
                    <div class="col-md-6">
                        <label class="radio-inline">
                          <input type="radio" name="sex" id="man" value="M"  checked> 男
                        </label>
                        <label class="radio-inline">
                          <input type="radio" name="sex" id="woman" value="F" > 女
                        </label>
                        
                    </div>

                </div>

                <div class="form-group">
                    <label for="birthday" class="col-md-3 control-label">生日</label>
                    <div class="col-md-2">
                        <select id="birthyear" name="birthday[year]" class="form-control">
                                                            <option value="" disabled>年</option>
                                                                                        <option value="1915" >1915</option>
                                                            <option value="1916" >1916</option>
                                                            <option value="1917" >1917</option>
                                                            <option value="1918" >1918</option>
                                                            <option value="1919" >1919</option>
                                                            <option value="1920" >1920</option>
                                                            <option value="1921" >1921</option>
                                                            <option value="1922" >1922</option>
                                                            <option value="1923" >1923</option>
                                                            <option value="1924" >1924</option>
                                                            <option value="1925" >1925</option>
                                                            <option value="1926" >1926</option>
                                                            <option value="1927" >1927</option>
                                                            <option value="1928" >1928</option>
                                                            <option value="1929" >1929</option>
                                                            <option value="1930" >1930</option>
                                                            <option value="1931" >1931</option>
                                                            <option value="1932" >1932</option>
                                                            <option value="1933" >1933</option>
                                                            <option value="1934" >1934</option>
                                                            <option value="1935" >1935</option>
                                                            <option value="1936" >1936</option>
                                                            <option value="1937" >1937</option>
                                                            <option value="1938" >1938</option>
                                                            <option value="1939" >1939</option>
                                                            <option value="1940" >1940</option>
                                                            <option value="1941" >1941</option>
                                                            <option value="1942" >1942</option>
                                                            <option value="1943" >1943</option>
                                                            <option value="1944" >1944</option>
                                                            <option value="1945" >1945</option>
                                                            <option value="1946" >1946</option>
                                                            <option value="1947" >1947</option>
                                                            <option value="1948" >1948</option>
                                                            <option value="1949" >1949</option>
                                                            <option value="1950" >1950</option>
                                                            <option value="1951" >1951</option>
                                                            <option value="1952" >1952</option>
                                                            <option value="1953" >1953</option>
                                                            <option value="1954" >1954</option>
                                                            <option value="1955" >1955</option>
                                                            <option value="1956" >1956</option>
                                                            <option value="1957" >1957</option>
                                                            <option value="1958" >1958</option>
                                                            <option value="1959" >1959</option>
                                                            <option value="1960" >1960</option>
                                                            <option value="1961" >1961</option>
                                                            <option value="1962" >1962</option>
                                                            <option value="1963" >1963</option>
                                                            <option value="1964" >1964</option>
                                                            <option value="1965" >1965</option>
                                                            <option value="1966" >1966</option>
                                                            <option value="1967" >1967</option>
                                                            <option value="1968" >1968</option>
                                                            <option value="1969" >1969</option>
                                                            <option value="1970" >1970</option>
                                                            <option value="1971" >1971</option>
                                                            <option value="1972" >1972</option>
                                                            <option value="1973" >1973</option>
                                                            <option value="1974" >1974</option>
                                                            <option value="1975" >1975</option>
                                                            <option value="1976" >1976</option>
                                                            <option value="1977" >1977</option>
                                                            <option value="1978" >1978</option>
                                                            <option value="1979" >1979</option>
                                                            <option value="1980" >1980</option>
                                                            <option value="1981" >1981</option>
                                                            <option value="1982" >1982</option>
                                                            <option value="1983" >1983</option>
                                                            <option value="1984" >1984</option>
                                                            <option value="1985" >1985</option>
                                                            <option value="1986" >1986</option>
                                                            <option value="1987" >1987</option>
                                                            <option value="1988" >1988</option>
                                                            <option value="1989" >1989</option>
                                                            <option value="1990" >1990</option>
                                                            <option value="1991" >1991</option>
                                                            <option value="1992" >1992</option>
                                                            <option value="1993"  selected>1993</option>
                                                            <option value="1994" >1994</option>
                                                            <option value="1995" >1995</option>
                                                            <option value="1996" >1996</option>
                                                            <option value="1997" >1997</option>
                                                            <option value="1998" >1998</option>
                                                            <option value="1999" >1999</option>
                                                            <option value="2000" >2000</option>
                                                            <option value="2001" >2001</option>
                                                            <option value="2002" >2002</option>
                                                            <option value="2003" >2003</option>
                                                            <option value="2004" >2004</option>
                                                            <option value="2005" >2005</option>
                                                            <option value="2006" >2006</option>
                                                            <option value="2007" >2007</option>
                                                            <option value="2008" >2008</option>
                                                            <option value="2009" >2009</option>
                                                            <option value="2010" >2010</option>
                                                            <option value="2011" >2011</option>
                                                            <option value="2012" >2012</option>
                                                            <option value="2013" >2013</option>
                                                            <option value="2014" >2014</option>
                                                            <option value="2015" >2015</option>
                                                            <option value="2016" >2016</option>
                                                            <option value="2017" >2017</option>
                                                            <option value="2018" >2018</option>
                                                            <option value="2019" >2019</option>
                                                            <option value="2020" >2020</option>
                                                            <option value="2021" >2021</option>
                                                            <option value="2022" >2022</option>
                                                    </select>
                        
                    </div>
                    <div class="col-md-2">
                        <select id="birthmonth" name="birthday[month]" class="form-control">
                                                            <option value="" disabled>月</option>
                                                                                        <option value="1" >1</option>
                                                            <option value="2" >2</option>
                                                            <option value="3" >3</option>
                                                            <option value="4" >4</option>
                                                            <option value="5" >5</option>
                                                            <option value="6"  selected>6</option>
                                                            <option value="7" >7</option>
                                                            <option value="8" >8</option>
                                                            <option value="9" >9</option>
                                                            <option value="10" >10</option>
                                                            <option value="11" >11</option>
                                                            <option value="12" >12</option>
                                                    </select>
                        
                    </div>
                    <div class="col-md-2">
                        <select id="birthday" name="birthday[day]" class="form-control">
                                                            <option value="" disabled>日</option>
                                                                                        <option value="1"  selected>1</option>
                                                            <option value="2" >2</option>
                                                            <option value="3" >3</option>
                                                            <option value="4" >4</option>
                                                            <option value="5" >5</option>
                                                            <option value="6" >6</option>
                                                            <option value="7" >7</option>
                                                            <option value="8" >8</option>
                                                            <option value="9" >9</option>
                                                            <option value="10" >10</option>
                                                            <option value="11" >11</option>
                                                            <option value="12" >12</option>
                                                            <option value="13" >13</option>
                                                            <option value="14" >14</option>
                                                            <option value="15" >15</option>
                                                            <option value="16" >16</option>
                                                            <option value="17" >17</option>
                                                            <option value="18" >18</option>
                                                            <option value="19" >19</option>
                                                            <option value="20" >20</option>
                                                            <option value="21" >21</option>
                                                            <option value="22" >22</option>
                                                            <option value="23" >23</option>
                                                            <option value="24" >24</option>
                                                            <option value="25" >25</option>
                                                            <option value="26" >26</option>
                                                            <option value="27" >27</option>
                                                            <option value="28" >28</option>
                                                            <option value="29" >29</option>
                                                            <option value="30" >30</option>
                                                            <option value="31" >31</option>
                                                    </select>
                        
                    </div>
                </div>

                <div class="form-group">
                    <label for="tel" class="col-md-3 control-label">電話</label>
                    <div class="col-md-2">
                        <input id="tel" class="form-control" placeholder="區碼" name="tel[zip]" type="text" value="0938711951">

                        
                    </div>

                    <div class="col-md-4">
                        <input id="tel" class="form-control" placeholder="電話" name="tel[number]" type="text" value="">
                        
                    </div>
                </div>
                <div class="form-group">
                    <label for="tel" class="col-md-3 control-label"></label>
                    <div class="col-md-3">
                        <input id="tel" class="form-control" placeholder="分機" name="tel[ext]" type="text" value="">
                        
                    </div>
                </div>

                <div class="form-group">
                    <label for="mobile" class="col-md-3 control-label">手機</label>
                    <div class="col-md-6">
                        <input id="mobile" class="form-control" placeholder="手機" name="mobile" type="text" value="0938711951">
                        
                    </div>
                </div>

                <div class="form-group">
                    <label for="zone_id" class="col-md-3 control-label">地址</label>
                    <div class="col-md-6">
                        <select id="zone_id" name="zone_id" class="form-control">
                                                            <option value="" disabled selected>縣市</option>
                                                                                        <option value="1" >臺北市</option>
                                                            <option value="2" >基隆市</option>
                                                            <option value="3" >新北市</option>
                                                            <option value="4" >宜蘭縣</option>
                                                            <option value="5" >桃園市</option>
                                                            <option value="6" >新竹市</option>
                                                            <option value="7" >新竹縣</option>
                                                            <option value="8" >苗栗縣</option>
                                                            <option value="9" >臺中市</option>
                                                            <option value="11" >彰化縣</option>
                                                            <option value="12" >南投縣</option>
                                                            <option value="13" >嘉義市</option>
                                                            <option value="14" >嘉義縣</option>
                                                            <option value="15" >雲林縣</option>
                                                            <option value="16" >臺南市</option>
                                                            <option value="18" >高雄市</option>
                                                            <option value="20" >澎湖縣</option>
                                                            <option value="21" >屏東縣</option>
                                                            <option value="22" >臺東縣</option>
                                                            <option value="23" >花蓮縣</option>
                                                            <option value="24" >金門縣</option>
                                                            <option value="25" >連江縣</option>
                                                            <option value="26" >海南諸島</option>
                                                            <option value="27" >大陸地區</option>
                                                            <option value="28" >港澳地區</option>
                                                            <option value="29" >歐洲</option>
                                                            <option value="30" >北美洲</option>
                                                            <option value="31" >中南美洲</option>
                                                            <option value="32" >亞洲及大洋洲</option>
                                                            <option value="33" >非洲地區</option>
                                                    </select>
                        
                    </div>
                </div>
                <div class="form-group">
                    <label for="address" class="col-md-3 control-label"></label>
                    <div class="col-md-6">
                        <input id="address" class="form-control" placeholder="地址" name="address" type="text" value="">
                    </div>
                </div>

                <div class="form-group">
                    <label for="education_id" class="col-md-3 control-label">教育程度</label>
                    <div class="col-md-6">
                        <select id="education_id" name="education_id" class="form-control">
                                                            <option value="" disabled selected>請選擇</option>
                                                                                        <option value ="1" >博士</option>
                                                            <option value ="2" >碩士</option>
                                                            <option value ="3" >大學/專科</option>
                                                            <option value ="4" >高中職</option>
                                                            <option value ="5" >國中以下</option>
                                                    </select>
                        
                    </div>
                </div>

                <div class="form-group">
                    <label for="company_name" class="col-md-3 control-label">公司名稱</label>
                    <div class="col-md-6">
                        <input id="company_name" class="form-control" placeholder="公司名稱" name="company_name" type="text" value="">
                    </div>
                </div>

                <div class="form-group">
                    <label for="company_scale_id" class="col-md-3 control-label">公司規模</label>
                    <div class="col-md-6">
                        <select id="company_scale_id" name="company_scale_id" class="form-control">
                                                            <option value="" disabled selected>請選擇</option>
                                                                                        <option value ="1" >5人以下</option>
                                                            <option value ="2" >5-20人</option>
                                                            <option value ="3" >20-50人</option>
                                                            <option value ="4" >50-100人</option>
                                                            <option value ="5" >100-200人</option>
                                                            <option value ="6" >200-500人</option>
                                                            <option value ="7" >500-1000人</option>
                                                            <option value ="8" >1000人以上</option>
                                                    </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="company_estate_id" class="col-md-3 control-label">產業</label>
                    <div class="col-md-6">
                        <select id="company_estate_id" name="company_estate_id" class="form-control">
                                                            <option value="" disabled selected>請選擇</option>
                                                                                        <option value ="14" >資訊硬體</option>
                                                            <option value ="15" >資訊軟體</option>
                                                            <option value ="16" >電信/網際網路</option>
                                                            <option value ="17" >資訊通路/SI</option>
                                                            <option value ="18" >金融保險</option>
                                                            <option value ="19" >政府機構</option>
                                                            <option value ="20" >教育機構</option>
                                                            <option value ="21" >醫療/醫藥生化</option>
                                                            <option value ="22" >塑化工業</option>
                                                            <option value ="23" >電機/機械</option>
                                                            <option value ="24" >汽機車</option>
                                                            <option value ="25" >百貨零售/傳銷</option>
                                                            <option value ="26" >物流倉儲</option>
                                                            <option value ="27" >食品/農畜</option>
                                                            <option value ="28" >其他</option>
                                                    </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="company_position_id" class="col-md-3 control-label">職位</label>
                    <div class="col-md-6">
                        <select id="company_position_id" name="company_position_id" class="form-control">
                                                            <option value="" disabled selected>請選擇</option>
                                                                                        <option value ="9" >企業負責人</option>
                                                            <option value ="10" >高階主管</option>
                                                            <option value ="11" >中階主管</option>
                                                            <option value ="12" >一般職員</option>
                                                            <option value ="13" >其他</option>
                                                    </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="company_job_function_id" class="col-md-3 control-label">工作性質</label>
                    <div class="col-md-6">
                        <select id="company_job_function_id" name="company_job_function_id" class="form-control">
                                                            <option value="" disabled selected>請選擇</option>
                                                                                        <option value ="4" >IT管理</option>
                                                            <option value ="5" >網路/系統管理</option>
                                                            <option value ="6" >資料庫管理</option>
                                                            <option value ="7" >系統分析/整合</option>
                                                            <option value ="8" >程式設計</option>
                                                            <option value ="9" >軟體測試</option>
                                                            <option value ="10" >硬體研發</option>
                                                            <option value ="11" >儲存管理</option>
                                                            <option value ="12" >技術支援</option>
                                                            <option value ="13" >技術諮詢</option>
                                                            <option value ="14" >經營管理</option>
                                                            <option value ="15" >營運</option>
                                                            <option value ="16" >人力資源</option>
                                                            <option value ="17" >會計/財務</option>
                                                            <option value ="18" >行銷企畫</option>
                                                            <option value ="19" >產品管理</option>
                                                            <option value ="20" >專案管理</option>
                                                            <option value ="21" >採購</option>
                                                            <option value ="22" >顧客關係</option>
                                                            <option value ="23" >公共關係</option>
                                                            <option value ="24" >其他</option>
                                                    </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="interest" class="col-md-3 control-label">興趣</label>
                    <div class="col-md-6">
                                                            <label class="checkbox-inline theme-checkbox">
                            <input type="checkbox" id="inlineCheckbox1" value="1" name="interest[]"
                                                        checked
                            >
                            <span class="label-text">資訊安全</span>
                                </label>
                                                            <label class="checkbox-inline theme-checkbox">
                            <input type="checkbox" id="inlineCheckbox1" value="2" name="interest[]"
                                                        checked
                            >
                            <span class="label-text">網路</span>
                                </label>
                                                            <label class="checkbox-inline theme-checkbox">
                            <input type="checkbox" id="inlineCheckbox1" value="3" name="interest[]"
                                                        checked
                            >
                            <span class="label-text">儲存</span>
                                </label>
                                                            <label class="checkbox-inline theme-checkbox">
                            <input type="checkbox" id="inlineCheckbox1" value="4" name="interest[]"
                                                        checked
                            >
                            <span class="label-text">軟體</span>
                                </label>
                                                            <label class="checkbox-inline theme-checkbox">
                            <input type="checkbox" id="inlineCheckbox1" value="5" name="interest[]"
                                                        checked
                            >
                            <span class="label-text">伺服器</span>
                                </label>
                                                            <label class="checkbox-inline theme-checkbox">
                            <input type="checkbox" id="inlineCheckbox1" value="6" name="interest[]"
                                                        checked
                            >
                            <span class="label-text">週邊</span>
                                </label>
                                                </div>
                </div>

                <div class="form-group">
                    <div class="col-sm-offset-3 col-sm-10">
                        <button type="submit" class="btn btn-agree">儲存修改</button>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-sm-12 text-right">
                        <a href="https://member.ithome.com.tw/profile/remove/130067#">刪除帳號</a>
                    </div>
                </div>
            </form>
            </form>

                </div>
            </div>
        </div>
</div>
<!-- Modal -->
<div id="avatarModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">頭像上傳</h4>
            </div>
            <div class="modal-body">
                <form id="avatarUpdateForm" action="https://member.ithome.com.tw/profile/avatar/130067" method="post">
                    <input type="hidden" name="_token" value="EjhOUNpx15YD4xpPlLUGn6deFjNP8gv7xtMWhsAF">
                    <input type="hidden" name="_method" value="PUT">
                    <input id="avatarUploadBtn" type="file" class="modal-margin">
                    <input id="hiddenImageData" name="avatar" type="hidden"/>
                    <div class="row">
                        <div class="pull-left" style="width: 300px; border: 1px solid #000; margin-left: 20px;">
                                <img id="uploadPreview" style="width: 100%"
                                     src="https://member.ithome.com.tw/avatars/130067"/>
                        </div>
                        <div class="pull-left"
                             style="width: 150px; height: 150px; border: 1px solid #000; overflow: hidden; margin-left: 20px;">
                                <img id="uploadSelectAreaPreview"
                                     src="https://member.ithome.com.tw/avatars/130067"/>

                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">關閉</button>
                <button id="avatarUploadSubmit" type="button" class="btn btn-agree">上傳</button>
            </div>
        </div>
    </div>
</div>
    <footer class="footer">
        <div class="container">
            <ul class="list-inline">
                <li>頻道服務介紹</li>
                <li><a href="https://www.ithome.com.tw" class="link-style">iThome online</a>
                </li>                
                <li><a href="https://ithelp.ithome.com.tw" class="link-style">iT邦幫忙</a>
                </li>
                <li><a href="https://techtalk.ithome.com.tw" class="link-style">Techtalk</a>
                </li>
            </ul>
            <ul class="list-inline">
                <li>電週文化事業版權所有、轉載必究 | Copyright © iThome</li>
                <li><a href="https://www.ithome.com.tw/aboutus#ad" class="link-style">刊登廣告</a>
                </li>
                <li><a href="http://weekly.ithome.com.tw" class="link-style">訂閱週刊</a>
                </li>
                <li><a href="https://www.ithome.com.tw/aboutus#authorize" class="link-style">授權服務</a>
                </li>
                <li><a href="https://www.ithome.com.tw/aboutus#contact" class="link-style">服務信箱</a>
                </li>
                <li><a href="https://www.ithome.com.tw/terms" class="link-style">隱私權聲明與會員使用條款</a>
                </li>
                <li><a href="https://www.ithome.com.tw/aboutus" class="link-style">關於iThome</a>
                </li>
                <li><a href="https://www.ithome.com.tw/rss" class="link-style">RSS</a>
                </li>
                 <!--
                <li><a href="http://www.ithome.com.tw/job" class="link-style">徵才</a>
                </li>
                -->
            </ul>
        </div>
    </footer>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script src="https://member.ithome.com.tw/lib/imgareaselect/js/jquery.imgareaselect.min.js"></script>
<script>
    $('.nick-position').click(function () {
        $('#editNickname').focus();
    });

    $('#editNickname').on('keydown', function (e) {
        if (e.keyCode === 13) {
            $('#editNickname').blur();
            return false;
        }
    }).on('paste', function () {
        return false;
    }).on('focusout', function updateNickname(e) {
        var nickname = $(this).text();
        var data = {
            _method: 'put',
            _token: 'EjhOUNpx15YD4xpPlLUGn6deFjNP8gv7xtMWhsAF',
            nickname: nickname
        };
        $.post('/profile/avatar/' + '130067', data).done(function (data) {
            if (data.status === 'failed') {
                alert(data.description);
            }
        });
        return false;
    });

    $('#editAvatarBtn').click(function () {
        $('#avatarModal').modal('show');
    });

    $("#avatarUploadBtn").change(function () {
        var oFReader = new FileReader();
        var file = document.getElementById("avatarUploadBtn").files[0];
        oFReader.readAsDataURL(file);
        if (file.type.split('/')[0] === 'image') {
            oFReader.onload = function (oFREvent) {
                document.getElementById("uploadPreview").src = oFREvent.target.result;
                document.getElementById("uploadSelectAreaPreview").src = oFREvent.target.result;
                preview(document.getElementById('uploadPreview'), imgAreaSelect.getSelection());
            };
        } else {
            alert('檔案類型不支援！');
        }
    });

    $('#avatarUploadSubmit').click(function () {
        var canvas = document.createElement('canvas');
        var context = canvas.getContext("2d");
        var img = document.getElementById("uploadPreview");
        var area = imgAreaSelect.getSelection();
        if (area.width === 0 && area.height === 0) {
            alert('請選取圖片區域!');
            return false;
        }
        var scale = img.naturalWidth / img.width;
        var draw = {
            x1: Math.round(scale * area.x1),
            y1: Math.round(scale * area.y1),
            width: Math.round(scale * area.width),
            height: Math.round(scale * area.height)
        };

        canvas.width = 150;
        canvas.height = 150;
        context.drawImage(img, draw.x1, draw.y1, draw.width, draw.height, 0, 0, 150, 150);

        var newFile = dataURItoBlob(canvas.toDataURL('image/png'));
        var formData = new FormData();

        formData.append('avatar', newFile);
        formData.append('_method', 'PUT');
        formData.append('_token', 'EjhOUNpx15YD4xpPlLUGn6deFjNP8gv7xtMWhsAF');

        $.ajax({
            url: '/profile/avatar/' + 130067,
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (data) {
                if (data.status === 'failed') {
                    console.log(1);
                    alert(data.description);
                } else {
                    console.log(2);
                    location.reload();
                }
            }
        }).done(function () {
            // location.reload();
        });
    });


    function dataURItoBlob(dataURI) {
        // convert base64 to raw binary data held in a string
        // doesn't handle URLEncoded DataURIs
        var byteString;
        if (dataURI.split(',')[0].indexOf('base64') >= 0)
            byteString = atob(dataURI.split(',')[1]);
        else
            byteString = unescape(dataURI.split(',')[1]);

        // separate out the mime component
        var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]

        // write the bytes of the string to an ArrayBuffer
        var ab = new ArrayBuffer(byteString.length);
        var ia = new Uint8Array(ab);
        for (var i = 0; i < byteString.length; i++) {
            ia[i] = byteString.charCodeAt(i);
        }

        //Passing an ArrayBuffer to the Blob constructor appears to be deprecated,
        //so convert ArrayBuffer to DataView
        var dataView = new DataView(ab);
        // var blob = new Blob([dataView], {type: mimeString});
        var blob = new Blob([dataView], {type: 'application/octet-stream'});

        return blob;
    }

    function preview(img, selection) {
        if (!selection.width || !selection.height) {
            return;
        }
        var scaleX = 150 / selection.width;
        var scaleY = 150 / selection.height;

        $('#uploadSelectAreaPreview').css({
            width: Math.round(scaleX * img.width),
            height: Math.round(scaleY * img.height),
            marginLeft: -Math.round(scaleX * selection.x1),
            marginTop: -Math.round(scaleY * selection.y1)
        });
    }

    $('#avatarModal').on('shown.bs.modal', function (e) {
        imgAreaSelect.setSelection(0, 0, 100, 100);
        imgAreaSelect.setOptions({show: true});
        imgAreaSelect.update();
        preview(document.getElementById('uploadPreview'), imgAreaSelect.getSelection());
    });

    $('#avatarModal').on('hide.bs.modal', function (e) {
        imgAreaSelect.cancelSelection();
        var avatar = $('#avatarInfo').attr('src');
        document.getElementById("uploadPreview").src = avatar;
        document.getElementById("uploadSelectAreaPreview").src = avatar;
    });

    var imgAreaSelect = $('#uploadPreview').imgAreaSelect({
        aspectRatio: '1:1',
        handles: true,
        fadeSpeed: 200,
        onSelectChange: preview,
        instance: true
    });

    preview(document.getElementById('uploadPreview'), imgAreaSelect.getSelection());
</script>
<script>
    $(function () {
        $(window).resize(function () {
            $('footer').toggleClass('bottom', $('html').outerHeight() < $(window).outerHeight());
        }).resize();
    });
</script>
</body>
</html>
